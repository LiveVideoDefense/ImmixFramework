<script>
    const params = new Proxy(new URLSearchParams(window.location.search), {
        get: (searchParams, prop) => searchParams.get(prop),
    });

    window.addEventListener('DOMContentLoaded', () => {
        if (params.username != undefined || params.password != undefined || params.port != undefined || params.pEndpoint != undefined) {
            const login = async () => {
                const response = await fetch('http://localhost:' + params.port + params.pEndpoint + 'basicLogon', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: params.username, password: params.password, proxyRequestID: params.requestID })
                });
            };
            login();
        }
    })
</script>